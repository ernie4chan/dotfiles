# User and Group management

## Users 

- stored inside `/etc/passwd`

### useradd

Creates new user account with default settings

- `useradd [configurations] username`
- Example: 

    `useradd --shell /sbin/nologin --home-dir /usr/local/nginx nginx`
- nologin denies user shell access (used for accounts destined to be running a service)
- default adduser settings inside `/etc/adduser.conf`

### usermod

- allows later modification of user (e.g., password)
- e.g., give shell access: `usermod --shell /bin/bash nginx`

### userdel

- allows deleting user (-r switch will wipe his home directory)

## Groups

- stored in `/etc/group`
- allows users of a group to inherit all its access permissions on files and directories
- user account belongs to at least user's primary group

### addgroup

- adds up to two groups with given name
- add user to group `usermod --append --groups groupname username`

# Programs and processes

## System Services

- applications running in the background (can be started in background via `&` after command)
- scripts that manage service startup and shutdown placed in several dirs, most common `/etc/init.d`
- commands given to init scripts (but not always implemented) `start, stop, restart, reload, status`
- `service --status-all` lists all system services and their status
- `service <name> <command>` allows controlling (e.g., starting, stopping) services

## Process management

### Listing processes

- `ps aux` lists all currently running processes
- `top` shows all currently running processes sorted by CPU usage and refreshes every second

### Killing Processes

- `kill pid` e.g., `kill 111` sends kill signal to process (process may ignore it)
- `kill -9 pid` forces process to terminate
- `killall processname` kills all processes with given name

# Linux File System

## Directory structure

- **/bin and /sbin**    binaries and system binaries respectively
- **/boot**             files used during system boot
- **/dev**              Devices (e.g., cdrom)
- **/home**             home directories for all users except root
- **/lib**              libraries required by binaries in **bin** and **sbin**
- **/media**            acess removable media using mount points
- **/mnt**              temporarily mounted file systems
- **/opt**              optional software packages (rarely used)
- **/proc**             kernel and process information virtual filesystem (statistics and details about running processes)
- **/root**             root user home directory
- **/srv**              service data (rarely used)
- **/tmp**              temporary files not to be preserved beyond program execution
- **/usr**              mirrors root directory structure to provide secondare hierarchy for shareable read-only user data
- **/var**              files that are expected to be modified by running applications or services
    - **/lib**          state information related to apps or the OS (e.g., MySql database files)
    - **/lock**         files used for synchronized resource access between applications
    - **/log**          log files generated by programs, services or system kernel
    - **/mail**         shortcut to /var/spool/mail
    - **/run**          runtime data, provides info about state of the system since it started (cleared on reboot)
    - **/spool**        files to be processed (e.g., emails and print jobs)
    - **/tmp**          temporary files deleted on reboot

## Pseudo devices

- **/dev**
    - **/null**          Null device: writing is always successful, reading returns no data (use to redirect/hide output)
    - **/random**        stream of true rambom numbers (write to it to feed pool)
    - **/urandom**       stream of pseudo random numbers (write to it to feed pool)
    - **/full**          returns error when written to and reads infinite stream of null characters
    - **/zero**          always successful when written to and reads infinite stream of null characters
    
## Files and inodes

### EXT3 filesystem 

- has 16 terabytes/file and 32 terabytes/device restrictions 
- lays out data so that file fragmentation is kept to minimum, hence no defragmentation is needed
- filenames up to 256 characters are case sensitive

### Inodes

- index nodes store extra information about a file (e.g., file permissions, ownership, filesize, access/modification times)
- `ls -i` retrieves inode number
- timestamps (use `stat` to retrieve them)
    - atime: Access time (last time read)
    - mtime: Modification time (last time file content changed)
    - ctime: Change time (last time file content or inode data changed)

### Symbolic and hard links

#### Symbolic links

- `ln -s target link` 
- read and write access is performed on the target of the link
- `rm` performed on link doesn't affect target
- may connect via relative paths

#### Hard links

- `ln target link`
- represent actual connections to file data
- once last link to target is removed, target is removed as well
- if target is removed, link remains





